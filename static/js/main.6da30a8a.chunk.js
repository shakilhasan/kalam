(this["webpackJsonpsimple-react-chat-app"]=this["webpackJsonpsimple-react-chat-app"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(14),o=a.n(r),i=(a(86),a(87),a(8)),c=a(7),l=a(12),u=a(11),m=a(143),h=a(141),d=a(144),f=a(71),j=a.n(f),g=a(137),x=a(136),b=a(4),p={currentUserTextContainer:{marginBottom:20,flex:0,justifyContent:"flex-end",display:"flex",marginLeft:"25%"},textBubble:{padding:10,backgroundColor:"#0071BC",justifyContent:"flex-start",flex:0,display:"flex",borderRadius:8,textAlign:"right",color:"white"},usernameText:{fontSize:9}},y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",message:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,a=e.username;e.timestamp;a&&this.setState({username:a}),t&&this.setState({message:t})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=(e.username,e.message);this.state.chatRoomData;return Object(b.jsx)(x.a,{style:p.currentUserTextContainer,children:Object(b.jsx)(g.a,{children:Object(b.jsx)(x.a,{style:p.textBubble,children:t})})})}}]),a}(n.Component),O={userTextContainer:{marginBottom:20,marginRight:"25%",flex:0,justifyContent:"flex-start",display:"flex"},textBubble:{padding:10,backgroundColor:"#E6E6E6",justifyContent:"flex-start",flex:0,display:"flex",textAlign:"left",borderRadius:8,color:"black"},usernameText:{fontSize:12,display:"flex",justifyContent:"flex-start",marginBottom:3}},v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",message:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,a=e.username;e.timestamp;a&&this.setState({username:a}),t&&this.setState({message:t})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.message;this.state.chatRoomData;return Object(b.jsx)(x.a,{style:O.userTextContainer,children:Object(b.jsxs)(g.a,{children:[Object(b.jsx)(x.a,{style:O.usernameText,children:t}),Object(b.jsx)(x.a,{style:O.textBubble,children:a})]})})}}]),a}(n.Component),C={currentUserTextContainer:{marginBottom:10,flex:0,justifyContent:"center",display:"flex"},textBubble:{padding:10,justifyContent:"center",flex:0,display:"flex",borderRadius:8,fontSize:14,color:"rgba(0, 0, 0, 0.50)"},usernameText:{fontSize:9}},D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",message:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message;e.timestamp;t&&this.setState({message:t})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.message;this.state.chatRoomData;return Object(b.jsx)(x.a,{style:C.currentUserTextContainer,children:Object(b.jsx)(g.a,{children:Object(b.jsx)(x.a,{style:C.textBubble,children:e})})})}}]),a}(n.Component),R=a(73),S=Object(R.a)("http://localhost:8080",{transports:["websocket"]}),T={chatRoomContainer:{marginTop:10},header:{height:"7vh",backgroundColor:"rgba(0, 0, 0, 0.25)",alignItems:"center",justifyContent:"center",display:"flex",borderTopLeftRadius:8,borderTopRightRadius:8,flexDirection:"column"},headerText:{fontSize:20},youAppearAsText:{fontSize:14,marginTop:5,display:"flex",flexDirection:"row"},usernameText:{fontWeight:"bold",marginLeft:3,marginRight:3},chatThread:{backgroundColor:"rgba(227, 227, 227, 0.2)",flex:0,display:"flex",flexDirection:"column",height:"75vh",overflowY:"auto",width:"45vw",alignSelf:"center",padding:20,paddingBottom:40,border:"1px solid rgba(0, 0, 0, 0.2)",borderBottomLeftRadius:8,borderBottomRightRadius:8,marginBottom:8},messageInputSection:{display:"flex",justifyContent:"flex-start"},messageTextField:{flex:1},messageSubmitButton:{flex:0}},k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={currentUsername:"User1",currentUserID:1,message:"",chatRoomData:[],initialLoad:!0},n.messagesEndRef=s.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("userID"),a=localStorage.getItem("username");t?(this.setState({currentUsername:a,currentUserID:t}),S.emit("UserEnteredRoom",{userID:t,username:a})):(S.on("SetUserData",(function(t){localStorage.setItem("userID",t.userID),localStorage.setItem("username",t.username),console.log(t),e.setState({currentUsername:t.username,currentUserID:t.userID}),S.emit("UserEnteredRoom",t)})),S.emit("CreateUserData")),S.on("RetrieveChatRoomData",(function(t){e.setState({chatRoomData:t},(function(){return e.shouldScrollToBottom()}))}))}},{key:"componentWillUnmount",value:function(){S.off("RetrieveChatRoomData"),S.off("SetUserData")}},{key:"setMessage",value:function(e){this.setState({message:e})}},{key:"sendMessageData",value:function(){var e=this.state,t=e.message,a=e.currentUsername,n=e.currentUserID;t.length>0&&(S.emit("SendMessage",{message:t,username:a,userID:n,timeStamp:null}),this.setState({message:""}))}},{key:"shouldScrollToBottom",value:function(){this.messagesEndRef.current.scrollHeight-this.messagesEndRef.current.scrollTop<this.messagesEndRef.current.offsetHeight+100&&this.scrollToBottom(),this.state.initialLoad&&(this.scrollToBottom(),this.setState({initialLoad:!1}))}},{key:"scrollToBottom",value:function(){this.messagesEndRef.current.scrollTop=this.messagesEndRef.current.scrollHeight}},{key:"render",value:function(){var e=this,t=this.state,a=t.chatRoomData,n=t.currentUsername;return Object(b.jsxs)(g.a,{style:T.chatRoomContainer,children:[Object(b.jsxs)(g.a,{style:T.header,children:[Object(b.jsx)(x.a,{style:T.headerText,children:"Chat Room"}),Object(b.jsxs)(x.a,{style:T.youAppearAsText,children:["You appear as",Object(b.jsxs)("div",{style:T.usernameText,children:[" ",n]}),"in chat"]})]}),Object(b.jsx)(g.a,{style:T.chatThread,ref:this.messagesEndRef,children:a.map((function(e,t){return e.username==n?Object(b.jsx)(y,{username:e.username,message:e.message},t):""==e.username?Object(b.jsx)(D,{username:e.username,message:e.message},t):Object(b.jsx)(v,{username:e.username,message:e.message},t)}))}),Object(b.jsx)(g.a,{style:T.messageInputSection,children:Object(b.jsx)(m.a,{style:T.messageTextField,id:"input-with-icon-adornment",label:"Enter Message",variant:"outlined",value:this.state.message,onChange:function(t){return e.setMessage(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&(console.log("Enter key pressed"),e.sendMessageData())},InputProps:{endAdornment:Object(b.jsx)(d.a,{position:"end",children:Object(b.jsx)(h.a,{onClick:function(){return e.sendMessageData()},children:Object(b.jsx)(j.a,{})})})}})})]})}}]),a}(n.Component),U=a(142),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={currentUsername:"User1",currentUserID:1,message:"",chatRoomData:[],initialLoad:!0},n.messagesEndRef=s.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"clearChatData",value:function(){S.emit("ClearChat")}},{key:"render",value:function(){var e=this,t=this.state;t.chatRoomData,t.currentUsername;return Object(b.jsxs)(g.a,{children:[Object(b.jsx)("div",{children:"Clear Chat"}),Object(b.jsx)(U.a,{variant:"contained",color:"primary",onClick:function(){return e.clearChatData()},children:"Clear Chat Data"})]})}}]),a}(n.Component),I=a(72),E=a(15);var M=function(){return Object(b.jsx)(I.a,{children:Object(b.jsx)("div",{className:"App",style:{justifyContent:"center",display:"flex"},children:Object(b.jsxs)(E.c,{children:[Object(b.jsx)(E.a,{exact:!0,path:"/",children:Object(b.jsx)(k,{})}),Object(b.jsx)(E.a,{exact:!0,path:"/clearChat",children:Object(b.jsx)(B,{})})]})})})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,146)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root")),L()},86:function(e,t,a){},87:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.6da30a8a.chunk.js.map